@model mvc_rpg.ViewModel.VersusScreen;
@{
    ViewData["Title"] = "Home Page";
}

<a asp-action="Index" asp-controller="Home">Next Fight!</a>
<br></br>
<br></br>

@Html.ValidationMessageFor(m => m.Enemy)
@Html.ValidationMessageFor(m => m.Player)

@if (Model.Enemy != null)
{
    <p>@Model.Enemy.Name <br /> @Model.Enemy.EnemyType.Name</p>
    <br></br>
    @if (Model.Enemy.isAlive == true)
    {
        <p>WON</p>
    }
    else
    {
        <p>LOST</p>
    }

}

@if (Model.Player != null)
{
    <td>
        @{
            var base64 = Convert.ToBase64String(Model.Player.ProfilePicture);
            var imgSrc = String.Format("data:image/gif;base64,{0}", base64);
            //Converted das ByteArray zu Base64 und converted es in ein bild.
        }

    </td>

    <p>@Model.Player.Name <br /> <img src="@imgSrc" /> </p>
    @if (Model.Player.isAlive == true)
    {
        <p>WON</p>
    }
    else
    {
        <p>LOST</p>
    }
    <p>Enemies Slain by this Player:</p>
    @foreach (var i in Model.PlayerKilledEnemies)
    {
        @i.Enemy.Name
    }
}

<br></br>
<br></br>
<p>COMBAT LOG</p>

@foreach(var i in Model.Graves)
{
    @if (i.KilledBy == killedBy.Enemy)
    {
        <p>[@i.DateTime]: @i.Player.Name killed by @i.Enemy.Name</p>
    } else
    {
        <p>[@i.DateTime]: @i.Enemy.Name killed by @i.Player.Name</p>
    }
}